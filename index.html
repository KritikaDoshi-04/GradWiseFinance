<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>College Finance Assistant</title>
<style>
  /* Base blue theme */
  :root {
    --bg-light: #e1e9f7;
    --bg-dark: #1c2b55;
    --text-light: #f0f4ff;
    --text-dark: #1a1a1a;
    --primary: #4169e1;
    --primary-dark: #27408b;
    --button-bg: #3a5aff;
    --button-hover: #2c43cc;
    --tip-bg: #d3e0ff;
  }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0; padding: 0;
    background-color: var(--bg-light);
    color: var(--text-dark);
    transition: background-color 0.3s, color 0.3s;
  }
  body.dark {
    background-color: var(--bg-dark);
    color: var(--text-light);
  }
  header {
    padding: 20px;
    background-color: var(--primary);
    color: white;
    text-align: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    position: sticky;
    top: 0;
    z-index: 100;
  }
  header h1 {
    margin: 0 0 10px 0;
  }
  #auth, #dashboard {
    margin-top: 10px;
  }
  input[type=text], input[type=number] {
    width: 100%;
    padding: 8px;
    margin: 5px 0 15px 0;
    border-radius: 5px;
    border: 1px solid #999;
    font-size: 1rem;
    box-sizing: border-box;
  }
  input[type=text]:focus, input[type=number]:focus {
    outline: none;
    border-color: var(--button-bg);
    box-shadow: 0 0 5px var(--button-bg);
  }
  button {
    background-color: var(--button-bg);
    color: white;
    border: none;
    border-radius: 8px;
    padding: 10px 16px;
    cursor: pointer;
    font-size: 1rem;
    margin: 5px;
    transition: background-color 0.3s;
  }
  button:hover {
    background-color: var(--button-hover);
  }
  button:disabled {
    background-color: gray;
    cursor: not-allowed;
  }
  .hidden {
    display: none;
  }
  #tools {
    max-width: 850px;
    margin: 20px auto 60px auto;
    background: white;
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(0,0,0,0.1);
    padding: 20px;
    transition: background-color 0.3s, color 0.3s;
  }
  body.dark #tools {
    background: #2e3b72;
    color: var(--text-light);
  }
  .section {
    margin-bottom: 25px;
  }
  h2 {
    color: var(--primary-dark);
    margin-bottom: 15px;
  }
  body.dark h2 {
    color: var(--text-light);
  }
  label {
    font-weight: 600;
  }
  .tips {
    background: var(--tip-bg);
    padding: 12px 15px;
    border-radius: 8px;
    margin-top: 20px;
    font-size: 0.95rem;
  }
  body.dark .tips {
    background: #4058a8;
  }
  .tips ul {
    margin: 0;
    padding-left: 20px;
  }
  #darkModeToggle {
    position: fixed;
    top: 15px;
    right: 120px;
    background: var(--button-bg);
  }
  #logoutBtn {
    position: fixed;
    bottom: 15px;
    right: 15px;
    background: var(--button-bg);
    border-radius: 50px;
    padding: 12px 20px;
    font-weight: 700;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  }
  #logoutBtn:hover {
    background-color: var(--button-hover);
  }
  /* Home page buttons */
  #dashboard button {
    width: calc(50% - 12px);
    margin: 6px;
    font-weight: 600;
  }
  @media(max-width: 600px){
    #dashboard button {
      width: 100%;
      margin: 6px 0;
    }
  }
</style>
</head>
<body>

<header>
  <h1>ðŸŽ“ College Finance Assistant</h1>

  <div id="auth">
    <input type="text" id="username" placeholder="Enter Username" autocomplete="off" />
    <button onclick="signup()">Sign Up</button>
    <button onclick="login()">Login</button>
  </div>

  <div id="dashboard" class="hidden" aria-label="Calculator selection">
    <p>Welcome, <span id="userDisplay"></span>!</p>
    <div id="calculatorButtons">
      <!-- Buttons dynamically generated by JS -->
    </div>
  </div>

  <button id="darkModeToggle" title="Toggle Dark Mode">ðŸŒ™</button>
</header>

<main id="tools" aria-live="polite">
  <!-- Calculator content loads here -->
</main>

<button id="logoutBtn" class="hidden" onclick="logout()">Logout</button>

<!-- Calculator templates -->

<!-- 1. Net Cost -->
<template id="net-cost-template">
  <section class="section" aria-label="Net Cost Calculator">
    <h2>Net Cost Calculator</h2>
    <label for="netTuition">Tuition and Fees ($):</label>
    <input type="number" id="netTuition" placeholder="Enter tuition and fees" min="0" />
    <label for="netRoomBoard">Room and Board ($):</label>
    <input type="number" id="netRoomBoard" placeholder="Enter room and board" min="0" />
    <label for="netAid">Financial Aid ($):</label>
    <input type="number" id="netAid" placeholder="Enter total financial aid" min="0" />
    <button onclick="calculateNetCost()">Calculate Net Cost</button>
    <h3 id="netCostResult" aria-live="polite"></h3>
    <div class="tips">
      <strong>Tips:</strong>
      <ul>
        <li>Compare net costs of different schools before deciding.</li>
        <li>Apply early for scholarships to maximize aid.</li>
        <li>Understand what is included in tuition vs fees.</li>
        <li>Consider off-campus housing to save money.</li>
        <li>Explore work-study programs for additional support.</li>
        <li>Check if aid is renewable each year.</li>
        <li>Budget for textbooks and supplies separately.</li>
      </ul>
    </div>
  </section>
</template>

<!-- 2. Loan Estimator -->
<template id="loan-estimator-template">
  <section class="section" aria-label="Loan Estimator Calculator">
    <h2>Loan Estimator</h2>
    <label for="loanAmount">Loan Amount ($):</label>
    <input type="number" id="loanAmount" placeholder="Enter loan amount" min="0" />
    <label for="loanInterest">Interest Rate (% per year):</label>
    <input type="number" id="loanInterest" placeholder="Enter interest rate" step="0.01" min="0" />
    <label for="loanTerm">Loan Term (years):</label>
    <input type="number" id="loanTerm" placeholder="Enter term length" min="0" />
    <button onclick="calculateLoan()">Calculate Monthly Payment</button>
    <h3 id="loanResult" aria-live="polite"></h3>
    <div class="tips">
      <strong>Tips:</strong>
      <ul>
        <li>Borrow only what you truly need to reduce future debt.</li>
        <li>Understand fixed vs variable interest rates.</li>
        <li>Make extra payments if possible to save on interest.</li>
        <li>Check federal loan forgiveness programs eligibility.</li>
        <li>Keep track of repayment start dates to avoid penalties.</li>
        <li>Consider loan consolidation if you have multiple loans.</li>
        <li>Explore grants and scholarships first before loans.</li>
      </ul>
    </div>
  </section>
</template>

<!-- 3. Budget Builder -->
<template id="budget-builder-template">
  <section class="section" aria-label="Budget Builder Calculator">
    <h2>Budget Builder</h2>
    <label for="income">Monthly Income ($):</label>
    <input type="number" id="income" placeholder="Enter monthly income" min="0" />
    <label for="fixedExpenses">Fixed Monthly Expenses ($):</label>
    <input type="number" id="fixedExpenses" placeholder="Enter fixed expenses" min="0" />
    <label for="variableExpenses">Variable Monthly Expenses ($):</label>
    <input type="number" id="variableExpenses" placeholder="Enter variable expenses" min="0" />
    <button onclick="calculateBudget()">Calculate Savings</button>
    <h3 id="budgetResult" aria-live="polite"></h3>
    <div class="tips">
      <strong>Tips:</strong>
      <ul>
        <li>Track your spending for a month to find saving opportunities.</li>
        <li>Set aside savings before budgeting other expenses.</li>
        <li>Prioritize needs over wants when budgeting.</li>
        <li>Review and adjust your budget monthly.</li>
        <li>Use budgeting apps to automate tracking.</li>
        <li>Cut down on variable expenses like dining out.</li>
        <li>Build an emergency fund for unexpected costs.</li>
      </ul>
    </div>
  </section>
</template>

<!-- 4. Spending Analyzer -->
<template id="spending-analyzer-template">
  <section class="section" aria-label="Spending Analyzer Calculator">
    <h2>Spending Analyzer</h2>
    <label for="totalSpent">Total Monthly Spending ($):</label>
    <input type="number" id="totalSpent" placeholder="Enter total spent" min="0" />
    <label for="needsPercent">Needs Percentage (%):</label>
    <input type="number" id="needsPercent" placeholder="Recommended 50%" min="0" max="100" value="50" />
    <label for="wantsPercent">Wants Percentage (%):</label>
    <input type="number" id="wantsPercent" placeholder="Recommended 30%" min="0" max="100" value="30" />
    <label for="savingsPercent">Savings Percentage (%):</label>
    <input type="number" id="savingsPercent" placeholder="Recommended 20%" min="0" max="100" value="20" />
    <button onclick="analyzeSpending()">Analyze</button>
    <h3 id="spendingResult" aria-live="polite"></h3>
    <div class="tips">
      <strong>Tips:</strong>
      <ul>
        <li>Use the 50-30-20 rule for balanced spending.</li>
        <li>Identify and reduce unnecessary wants spending.</li>
        <li>Automate savings to build financial discipline.</li>
        <li>Review your budget monthly and adjust percentages.</li>
        <li>Plan for irregular expenses in your needs category.</li>
        <li>Set short and long term financial goals.</li>
        <li>Use apps or spreadsheets to track and categorize expenses.</li>
      </ul>
    </div>
  </section>
</template>

<!-- 5. Campus Saver -->
<template id="campus-saver-template">
  <section class="section" aria-label="Campus Saver Calculator">
    <h2>Campus Saver</h2>
    <label for="location">Campus Location (City):</label>
    <input type="text" id="location" placeholder="Enter your campus city" />
    <button onclick="getCampusSavings()">Check Savings Opportunities</button>
    <h3 id="campusSaverResult" aria-live="polite"></h3>
    <div class="tips">
      <strong>Tips:</strong>
      <ul>
        <li>Look for student discounts available locally.</li>
        <li>Use public transport passes to save on travel.</li>
        <li>Buy used textbooks or rent them online.</li>
        <li>Share housing or meals to reduce costs.</li>
        <li>Attend free campus events for entertainment.</li>
        <li>Shop at budget-friendly grocery stores.</li>
        <li>Join campus groups for shared resources and info.</li>
      </ul>
    </div>
  </section>
</template>

<!-- 6. Debt Decoder -->
<template id="debt-decoder-template">
  <section class="section" aria-label="Debt Decoder Calculator">
    <h2>Debt Decoder</h2>
    <label for="debtAmount">Total Debt ($):</label>
    <input type="number" id="debtAmount" placeholder="Enter total debt" min="0" />
    <label for="debtInterest">Average Interest Rate (%):</label>
    <input type="number" id="debtInterest" placeholder="Enter interest rate" step="0.01" min="0" />
    <label for="monthlyPayment">Monthly Payment ($):</label>
    <input type="number" id="monthlyPayment" placeholder="Enter monthly payment" min="0" />
    <button onclick="decodeDebt()">Calculate Payoff Time</button>
    <h3 id="debtResult" aria-live="polite"></h3>
    <div class="tips">
      <strong>Tips:</strong>
      <ul>
        <li>Pay more than the minimum monthly payment if possible.</li>
        <li>Prioritize debts with the highest interest rates first.</li>
        <li>Avoid taking on new debt while paying off current loans.</li>
        <li>Consider debt consolidation for lower interest rates.</li>
        <li>Use windfalls like bonuses to pay down debt faster.</li>
        <li>Create a realistic timeline and stick to it.</li>
        <li>Track your progress monthly to stay motivated.</li>
      </ul>
    </div>
  </section>
</template>

<!-- 7. Salary Planner -->
<template id="salary-planner-template">
  <section class="section" aria-label="Salary Planner Calculator">
    <h2>Salary Planner</h2>
    <label for="expectedSalary">Expected Annual Salary ($):</label>
    <input type="number" id="expectedSalary" placeholder="Enter expected salary" min="0" />
    <label for="taxRate">Estimated Tax Rate (%):</label>
    <input type="number" id="taxRate" placeholder="Enter tax rate" step="0.01" min="0" max="100" />
    <button onclick="calculateSalary()">Calculate Monthly Take-Home Pay</button>
    <h3 id="salaryResult" aria-live="polite"></h3>
    <div class="tips">
      <strong>Tips:</strong>
      <ul>
        <li>Research typical salary ranges for your major and region.</li>
        <li>Factor in taxes and benefits for true take-home pay.</li>
        <li>Consider cost of living adjustments.</li>
        <li>Plan for gradual salary increases with experience.</li>
        <li>Save a portion of income for retirement early.</li>
        <li>Use salary info to negotiate job offers.</li>
        <li>Keep skills updated to increase earning potential.</li>
      </ul>
    </div>
  </section>
</template>

<!-- 8. Credit Coach -->
<template id="credit-coach-template">
  <section class="section" aria-label="Credit Coach Calculator">
    <h2>Credit Coach</h2>
    <p>Understand and improve your credit score with these tips!</p>
    <div class="tips">
      <ul>
        <li>Pay your bills on time every month.</li>
        <li>Keep your credit utilization below 30% of your credit limit.</li>
        <li>Maintain older credit accounts to improve length of credit history.</li>
        <li>Avoid opening multiple new credit accounts at once.</li>
        <li>Check your credit report regularly for errors.</li>
        <li>Limit hard inquiries on your credit report.</li>
        <li>Use a mix of credit types responsibly.</li>
      </ul>
    </div>
  </section>
</template>

<!-- 9. Textbook Calculator -->
<template id="textbook-calculator-template">
  <section class="section" aria-label="Textbook Calculator">
    <h2>Textbook Cost Calculator</h2>
    <label for="numBooks">Number of Textbooks:</label>
    <input type="number" id="numBooks" placeholder="Enter number of textbooks" min="0" />
    <label for="avgPrice">Average Price per Book ($):</label>
    <input type="number" id="avgPrice" placeholder="Enter average price" min="0" />
    <button onclick="calculateTextbookCost()">Calculate Total Cost</button>
    <h3 id="textbookResult" aria-live="polite"></h3>
    <div class="tips">
      <strong>Tips:</strong>
      <ul>
        <li>Consider renting textbooks instead of buying.</li>
        <li>Buy used books to save money.</li>
        <li>Check if digital versions are cheaper or free.</li>
        <li>Share or swap books with classmates.</li>
        <li>Use library resources whenever possible.</li>
        <li>Plan your book purchases ahead to catch sales.</li>
        <li>Look for open educational resources (OER).</li>
      </ul>
    </div>
  </section>
</template>

<!-- 10. Savings Planner -->
<template id="savings-planner-template">
  <section class="section" aria-label="Savings Planner Calculator">
    <h2>Savings Planner</h2>
    <label for="goalAmount">Savings Goal ($):</label>
    <input type="number" id="goalAmount" placeholder="Enter savings goal" min="0" />
    <label for="months">Months to Save:</label>
    <input type="number" id="months" placeholder="Enter months to save" min="1" />
    <button onclick="calculateSavings()">Calculate Monthly Savings Needed</button>
    <h3 id="savingsResult" aria-live="polite"></h3>
    <div class="tips">
      <strong>Tips:</strong>
      <ul>
        <li>Set realistic savings goals based on your income.</li>
        <li>Automate monthly transfers to your savings account.</li>
        <li>Cut discretionary spending to boost savings.</li>
        <li>Consider high-yield savings accounts.</li>
        <li>Track progress monthly to stay motivated.</li>
        <li>Adjust goals if your financial situation changes.</li>
        <li>Save unexpected windfalls entirely or partially.</li>
      </ul>
    </div>
  </section>
</template>

<!-- 11. Scholarship Finder -->
<template id="scholarship-finder-template">
  <section class="section" aria-label="Scholarship Finder">
    <h2>Scholarship Finder</h2>
    <p>This feature will help find scholarships based on your profile in future updates.</p>
    <div class="tips">
      <strong>Tips:</strong>
      <ul>
        <li>Apply to many scholarships to increase chances.</li>
        <li>Focus on local scholarships with less competition.</li>
        <li>Keep your resume and essays ready.</li>
        <li>Highlight your extracurriculars and achievements.</li>
        <li>Meet all application deadlines carefully.</li>
        <li>Ask for recommendations early.</li>
        <li>Stay organized with a scholarship tracker.</li>
      </ul>
    </div>
  </section>
</template>

<!-- 12. Emergency Fund Calculator -->
<template id="emergency-fund-template">
  <section class="section" aria-label="Emergency Fund Calculator">
    <h2>Emergency Fund Calculator</h2>
    <label for="monthlyExpenses">Monthly Expenses ($):</label>
    <input type="number" id="monthlyExpenses" placeholder="Enter your monthly expenses" min="0" />
    <label for="monthsCoverage">Months of Coverage Desired:</label>
    <input type="number" id="monthsCoverage" placeholder="Typically 3 to 6 months" min="1" />
    <button onclick="calculateEmergencyFund()">Calculate Emergency Fund Needed</button>
    <h3 id="emergencyFundResult" aria-live="polite"></h3>
    <div class="tips">
      <strong>Tips:</strong>
      <ul>
        <li>Aim for 3-6 months of expenses saved.</li>
        <li>Keep emergency fund separate from other savings.</li>
        <li>Use a high-yield savings account for your fund.</li>
        <li>Contribute regularly, even small amounts add up.</li>
        <li>Only use this fund for true emergencies.</li>
        <li>Review your fund annually and adjust as needed.</li>
        <li>Prioritize building this fund before investing.</li>
      </ul>
    </div>
  </section>
</template>

<!-- 13. Retirement Planner -->
<template id="retirement-planner-template">
  <section class="section" aria-label="Retirement Planner">
    <h2>Retirement Planner</h2>
    <label for="currentAge">Current Age:</label>
    <input type="number" id="currentAge" min="0" max="100" />
    <label for="retirementAge">Desired Retirement Age:</label>
    <input type="number" id="retirementAge" min="0" max="100" />
    <label for="currentSavings">Current Retirement Savings ($):</label>
    <input type="number" id="currentSavings" min="0" />
    <label for="monthlyContribution">Monthly Contribution ($):</label>
    <input type="number" id="monthlyContribution" min="0" />
    <label for="annualReturn">Expected Annual Return (%):</label>
    <input type="number" id="annualReturn" min="0" step="0.1" />
    <button onclick="calculateRetirement()">Calculate Retirement Savings</button>
    <h3 id="retirementResult" aria-live="polite"></h3>
    <div class="tips">
      <strong>Tips:</strong>
      <ul>
        <li>Start saving as early as possible for compound growth.</li>
        <li>Increase contributions as your income grows.</li>
        <li>Review your plan every few years.</li>
        <li>Diversify investments for better risk management.</li>
        <li>Consider employer-matched retirement plans.</li>
        <li>Keep track of inflation in your planning.</li>
        <li>Stay informed on retirement account rules.</li>
      </ul>
    </div>
  </section>
</template>

<!-- 14. Financial Goal Tracker -->
<template id="goal-tracker-template">
  <section class="section" aria-label="Financial Goal Tracker">
    <h2>Financial Goal Tracker</h2>
    <label for="goalName">Goal Name:</label>
    <input type="text" id="goalName" placeholder="E.g. Buy a car" />
    <label for="goalAmount2">Goal Amount ($):</label>
    <input type="number" id="goalAmount2" min="0" />
    <label for="amountSaved">Amount Saved So Far ($):</label>
    <input type="number" id="amountSaved" min="0" />
    <button onclick="trackGoal()">Check Progress</button>
    <h3 id="goalResult" aria-live="polite"></h3>
    <div class="tips">
      <strong>Tips:</strong>
      <ul>
        <li>Set clear and realistic financial goals.</li>
        <li>Break large goals into smaller milestones.</li>
        <li>Track progress regularly and adjust plans.</li>
        <li>Celebrate small successes to stay motivated.</li>
        <li>Automate savings for each goal if possible.</li>
        <li>Reassess goals when your priorities change.</li>
        <li>Stay flexible but disciplined in saving.</li>
      </ul>
    </div>
  </section>
</template>

<!-- 15. Investment Calculator -->
<template id="investment-calculator-template">
  <section class="section" aria-label="Investment Calculator">
    <h2>Investment Calculator</h2>
    <label for="investmentAmount">Initial Investment ($):</label>
    <input type="number" id="investmentAmount" min="0" />
    <label for="monthlyInvestment">Monthly Investment ($):</label>
    <input type="number" id="monthlyInvestment" min="0" />
    <label for="investmentYears">Years to Invest:</label>
    <input type="number" id="investmentYears" min="0" />
    <label for="investmentReturn">Annual Return Rate (%):</label>
    <input type="number" id="investmentReturn" step="0.1" min="0" />
    <button onclick="calculateInvestment()">Calculate Future Value</button>
    <h3 id="investmentResult" aria-live="polite"></h3>
    <div class="tips">
      <strong>Tips:</strong>
      <ul>
        <li>Start investing early to maximize compound interest.</li>
        <li>Diversify your portfolio to manage risk.</li>
        <li>Consider low-cost index funds for steady growth.</li>
        <li>Review investments periodically.</li>
        <li>Be patient and avoid impulsive decisions.</li>
        <li>Reinvest dividends to boost returns.</li>
        <li>Understand your risk tolerance before investing.</li>
      </ul>
    </div>
  </section>
</template>

<!-- 16. Tax Estimator -->
<template id="tax-estimator-template">
  <section class="section" aria-label="Tax Estimator">
    <h2>Tax Estimator</h2>
    <label for="incomeTax">Annual Income ($):</label>
    <input type="number" id="incomeTax" min="0" />
    <label for="filingStatus">Filing Status:</label>
    <select id="filingStatus">
      <option value="single">Single</option>
      <option value="married">Married Filing Jointly</option>
      <option value="head">Head of Household</option>
    </select>
    <button onclick="estimateTax()">Estimate Tax Owed</button>
    <h3 id="taxResult" aria-live="polite"></h3>
    <div class="tips">
      <strong>Tips:</strong>
      <ul>
        <li>Use deductions and credits to lower taxable income.</li>
        <li>File taxes early to avoid last-minute stress.</li>
        <li>Keep good records of income and expenses.</li>
        <li>Consider professional help for complex tax situations.</li>
        <li>Review tax laws yearly for changes.</li>
        <li>Plan estimated tax payments if self-employed.</li>
        <li>Maximize retirement contributions for tax benefits.</li>
      </ul>
    </div>
  </section>
</template>

<!-- 17. Expense Tracker -->
<template id="expense-tracker-template">
  <section class="section" aria-label="Expense Tracker">
    <h2>Expense Tracker</h2>
    <label for="expenseName">Expense Name:</label>
    <input type="text" id="expenseName" placeholder="E.g. Coffee" />
    <label for="expenseAmount">Amount ($):</label>
    <input type="number" id="expenseAmount" min="0" />
    <button onclick="addExpense()">Add Expense</button>
    <h3>Total Expenses: $<span id="totalExpenses">0.00</span></h3>
    <ul id="expenseList" aria-live="polite"></ul>
    <div class="tips">
      <strong>Tips:</strong>
      <ul>
        <li>Record expenses daily to stay on track.</li>
        <li>Review spending weekly to spot trends.</li>
        <li>Set monthly limits for discretionary spending.</li>
        <li>Use cash envelopes to control spending.</li>
        <li>Analyze categories to find saving opportunities.</li>
        <li>Avoid impulse purchases by waiting 24 hours.</li>
        <li>Keep receipts and use apps for tracking.</li>
      </ul>
    </div>
  </section>
</template>

<script>
  // User authentication simulation
  let currentUser = null;

  // Store expenses for expense tracker by user
  let userExpenses = {};

  // Cached DOM
  const authDiv = document.getElementById('auth');
  const dashboardDiv = document.getElementById('dashboard');
  const userDisplay = document.getElementById('userDisplay');
  const calculatorButtonsDiv = document.getElementById('calculatorButtons');
  const toolsMain = document.getElementById('tools');
  const logoutBtn = document.getElementById('logoutBtn');
  const darkModeToggle = document.getElementById('darkModeToggle');

  // Calculator names and templates mapping
  const calculators = [
    { id: 'net-cost', name: 'Net Cost Calculator' },
    { id: 'loan-estimator', name: 'Loan Estimator' },
    { id: 'budget-builder', name: 'Budget Builder' },
    { id: 'spending-analyzer', name: 'Spending Analyzer' },
    { id: 'campus-saver', name: 'Campus Saver' },
    { id: 'debt-decoder', name: 'Debt Decoder' },
    { id: 'salary-planner', name: 'Salary Planner' },
    { id: 'credit-coach', name: 'Credit Coach' },
    { id: 'textbook-calculator', name: 'Textbook Calculator' },
    { id: 'savings-planner', name: 'Savings Planner' },
    { id: 'scholarship-finder', name: 'Scholarship Finder' },
    { id: 'emergency-fund', name: 'Emergency Fund Calculator' },
    { id: 'retirement-planner', name: 'Retirement Planner' },
    { id: 'goal-tracker', name: 'Financial Goal Tracker' },
    { id: 'investment-calculator', name: 'Investment Calculator' },
    { id: 'tax-estimator', name: 'Tax Estimator' },
    { id: 'expense-tracker', name: 'Expense Tracker' },
  ];

  // Save users (simulate a user database)
  const usersDB = {};

  function signup() {
    const username = document.getElementById('username').value.trim();
    if (!username) {
      alert('Please enter a username.');
      return;
    }
    if (usersDB[username]) {
      alert('Username already exists. Please login or choose another name.');
      return;
    }
    usersDB[username] = { expenses: [] };
    alert(`User "${username}" created. Please login.`);
    document.getElementById('username').value = '';
  }

  function login() {
    const username = document.getElementById('username').value.trim();
    if (!username) {
      alert('Please enter your username.');
      return;
    }
    if (!usersDB[username]) {
      alert('Username not found. Please sign up first.');
      return;
    }
    currentUser = username;
    userExpenses[currentUser] = usersDB[username].expenses || [];
    showDashboard();
  }

  function logout() {
    currentUser = null;
    toolsMain.innerHTML = '';
    dashboardDiv.classList.add('hidden');
    logoutBtn.classList.add('hidden');
    authDiv.classList.remove('hidden');
    userDisplay.textContent = '';
  }

  function showDashboard() {
    authDiv.classList.add('hidden');
    dashboardDiv.classList.remove('hidden');
    logoutBtn.classList.remove('hidden');
    userDisplay.textContent = currentUser;
    toolsMain.innerHTML = '<p>Select a calculator to get started.</p>';
    calculatorButtonsDiv.innerHTML = '';
    calculators.forEach(calc => {
      const btn = document.createElement('button');
      btn.textContent = calc.name;
      btn.onclick = () => loadCalculator(calc.id);
      calculatorButtonsDiv.appendChild(btn);
    });
  }

  function loadCalculator(calcId) {
    const template = document.getElementById(`${calcId}-template`);
    if (!template) {
      toolsMain.innerHTML = '<p>Calculator not found.</p>';
      return;
    }
    toolsMain.innerHTML = '';
    toolsMain.appendChild(template.content.cloneNode(true));
  }

  // === Calculator Functions ===

  // 1. Net Cost Calculator
  function calculateNetCost() {
    const tuition = parseFloat(document.getElementById('netTuition').value) || 0;
    const roomBoard = parseFloat(document.getElementById('netRoomBoard').value) || 0;
    const aid = parseFloat(document.getElementById('netAid').value) || 0;
    const netCost = tuition + roomBoard - aid;
    const result = document.getElementById('netCostResult');
    if(netCost < 0) {
      result.textContent = "Check your inputs; net cost can't be negative.";
    } else {
      result.textContent = `Estimated Net Cost: $${netCost.toFixed(2)}`;
    }
  }

  // 2. Loan Estimator
  function calculateLoan() {
    const P = parseFloat(document.getElementById('loanAmount').value) || 0;
    const r = (parseFloat(document.getElementById('loanInterest').value) || 0) / 100 / 12;
    const n = (parseInt(document.getElementById('loanTerm').value) || 0) * 12;
    const result = document.getElementById('loanResult');

    if (P <= 0 || r < 0 || n <= 0) {
      result.textContent = 'Please enter valid positive numbers.';
      return;
    }
    if (r === 0) {
      const payment = P / n;
      result.textContent = `Monthly Payment: $${payment.toFixed(2)}`;
      return;
    }
    const payment = P * r * Math.pow(1 + r, n) / (Math.pow(1 + r, n) - 1);
    result.textContent = `Estimated Monthly Payment: $${payment.toFixed(2)}`;
  }

  // 3. Budget Builder
  function calculateBudget() {
    const income = parseFloat(document.getElementById('income').value) || 0;
    const fixed = parseFloat(document.getElementById('fixedExpenses').value) || 0;
    const variable = parseFloat(document.getElementById('variableExpenses').value) || 0;
    const savings = income - fixed - variable;
    const result = document.getElementById('budgetResult');
    if (income <= 0) {
      result.textContent = 'Please enter a valid income.';
      return;
    }
    if (savings < 0) {
      result.textContent = `You are overspending by $${(-savings).toFixed(2)}. Consider reducing expenses.`;
    } else {
      result.textContent = `Estimated Monthly Savings: $${savings.toFixed(2)}`;
    }
  }

  // 4. Spending Analyzer
  function analyzeSpending() {
    const total = parseFloat(document.getElementById('totalSpent').value) || 0;
    const needs = parseFloat(document.getElementById('needsPercent').value) || 50;
    const wants = parseFloat(document.getElementById('wantsPercent').value) || 30;
    const savings = parseFloat(document.getElementById('savingsPercent').value) || 20;
    const sum = needs + wants + savings;
    const result = document.getElementById('spendingResult');
    if (sum !== 100) {
      result.textContent = 'Percentages must add up to 100%.';
      return;
    }
    if(total <= 0) {
      result.textContent = 'Enter total spending greater than 0.';
      return;
    }
    result.textContent = 
      `Needs: $${(total * needs / 100).toFixed(2)}, ` +
      `Wants: $${(total * wants / 100).toFixed(2)}, ` +
      `Savings: $${(total * savings / 100).toFixed(2)}`;
  }

  // 5. Campus Saver
  function calculateCampusSaver() {
    const rent = parseFloat(document.getElementById('rentCost').value) || 0;
    const food = parseFloat(document.getElementById('foodCost').value) || 0;
    const transport = parseFloat(document.getElementById('transportCost').value) || 0;
    const other = parseFloat(document.getElementById('otherCost').value) || 0;
    const total = rent + food + transport + other;
    const result = document.getElementById('campusSaverResult');
    result.textContent = `Estimated Monthly Expenses: $${total.toFixed(2)}`;
  }

  // 6. Debt Decoder
  function decodeDebt() {
    const totalDebt = parseFloat(document.getElementById('totalDebt').value) || 0;
    const interestRate = parseFloat(document.getElementById('interestRate').value) || 0;
    const monthlyPayment = parseFloat(document.getElementById('monthlyPayment').value) || 0;
    const result = document.getElementById('debtResult');
    if(monthlyPayment <= 0 || totalDebt <= 0 || interestRate < 0) {
      result.textContent = "Please enter valid positive numbers.";
      return;
    }
    if(monthlyPayment <= totalDebt * (interestRate/100)/12) {
      result.textContent = "Monthly payment is too low to cover interest.";
      return;
    }
    // Calculate months to pay off debt
    const r = interestRate / 100 / 12;
    const n = Math.log(monthlyPayment / (monthlyPayment - r * totalDebt)) / Math.log(1 + r);
    const years = Math.floor(n / 12);
    const months = Math.round(n % 12);
    result.textContent = `It will take approximately ${years} years and ${months} months to pay off your debt.`;
  }

  // 7. Salary Planner
  function planSalary() {
    const hourlyWage = parseFloat(document.getElementById('hourlyWage').value) || 0;
    const hoursPerWeek = parseFloat(document.getElementById('hoursPerWeek').value) || 0;
    const weeksPerYear = parseFloat(document.getElementById('weeksPerYear').value) || 52;
    const taxRate = parseFloat(document.getElementById('taxRate').value) || 0;
    const result = document.getElementById('salaryResult');
    if(hourlyWage <= 0 || hoursPerWeek <= 0) {
      result.textContent = "Enter valid positive hourly wage and hours.";
      return;
    }
    const grossAnnual = hourlyWage * hoursPerWeek * weeksPerYear;
    const netAnnual = grossAnnual * (1 - taxRate / 100);
    result.textContent = `Estimated Net Annual Salary: $${netAnnual.toFixed(2)}`;
  }

  // 8. Credit Coach
  function coachCredit() {
    const creditScore = parseInt(document.getElementById('creditScore').value) || 0;
    const result = document.getElementById('creditResult');
    if(creditScore <= 0 || creditScore > 850) {
      result.textContent = "Enter a credit score between 1 and 850.";
      return;
    }
    if (creditScore >= 750) {
      result.textContent = "Excellent credit score! Keep up the good work.";
    } else if (creditScore >= 700) {
      result.textContent = "Good credit score. Consider improving for better rates.";
    } else if (creditScore >= 650) {
      result.textContent = "Fair credit score. Work on reducing debts and paying on time.";
    } else if (creditScore >= 600) {
      result.textContent = "Poor credit score. Focus on payments and avoid new debt.";
    } else {
      result.textContent = "Very poor credit score. Consider credit counseling.";
    }
  }

  // 9. Textbook Calculator
  function calculateTextbook() {
    const price = parseFloat(document.getElementById('textbookPrice').value) || 0;
    const discount = parseFloat(document.getElementById('textbookDiscount').value) || 0;
    const result = document.getElementById('textbookResult');
    if(price < 0 || discount < 0 || discount > 100) {
      result.textContent = "Please enter valid price and discount.";
      return;
    }
    const finalPrice = price * (1 - discount / 100);
    result.textContent = `Final Price after Discount: $${finalPrice.toFixed(2)}`;
  }

  // 10. Savings Planner
  function calculateSavings() {
    const goal = parseFloat(document.getElementById('goalAmount').value) || 0;
    const months = parseInt(document.getElementById('months').value) || 1;
    const result = document.getElementById('savingsResult');
    if(goal <= 0 || months <= 0) {
      result.textContent = "Enter valid savings goal and months.";
      return;
    }
    const monthly = goal / months;
    result.textContent = `You need to save $${monthly.toFixed(2)} per month.`;
  }

  // 12. Scholarship Finder (placeholder)
  // No calculation needed now.

  // 13. Emergency Fund Calculator
  function calculateEmergencyFund() {
    const expenses = parseFloat(document.getElementById('monthlyExpenses').value) || 0;
    const coverage = parseInt(document.getElementById('monthsCoverage').value) || 3;
    const result = document.getElementById('emergencyFundResult');
    if(expenses <= 0 || coverage <= 0) {
      result.textContent = "Enter valid monthly expenses and coverage months.";
      return;
    }
    const fund = expenses * coverage;
    result.textContent = `Recommended Emergency Fund: $${fund.toFixed(2)}`;
  }

  // 14. Retirement Planner
  function calculateRetirement() {
    const currentAge = parseInt(document.getElementById('currentAge').value) || 0;
    const retirementAge = parseInt(document.getElementById('retirementAge').value) || 0;
    const currentSavings = parseFloat(document.getElementById('currentSavings').value) || 0;
    const monthlyContribution = parseFloat(document.getElementById('monthlyContribution').value) || 0;
    const annualReturn = parseFloat(document.getElementById('annualReturn').value) || 0;
    const result = document.getElementById('retirementResult');

    if (retirementAge <= currentAge) {
      result.textContent = "Retirement age must be greater than current age.";
      return;
    }
    const months = (retirementAge - currentAge) * 12;
    const monthlyReturn = annualReturn / 100 / 12;
    let futureValue = currentSavings * Math.pow(1 + monthlyReturn, months);

    for(let i = 0; i < months; i++) {
      futureValue += monthlyContribution * Math.pow(1 + monthlyReturn, months - 1 - i);
    }

    result.textContent = `Estimated Retirement Savings: $${futureValue.toFixed(2)}`;
  }

  // 15. Financial Goal Tracker
  function trackGoal() {
    const name = document.getElementById('goalName').value.trim();
    const amount = parseFloat(document.getElementById('goalAmount2').value) || 0;
    const saved = parseFloat(document.getElementById('amountSaved').value) || 0;
    const result = document.getElementById('goalResult');

    if (!name || amount <= 0) {
      result.textContent = "Enter a goal name and valid amount.";
      return;
    }
    if (saved > amount) {
      result.textContent = `You have exceeded your goal by $${(saved - amount).toFixed(2)}! Great job!`;
      return;
    }
    const percent = (saved / amount) * 100;
    result.textContent = `You have saved ${percent.toFixed(2)}% towards your goal "${name}". Keep going!`;
  }

  // 16. Investment Calculator
  function calculateInvestment() {
    const initial = parseFloat(document.getElementById('investmentAmount').value) || 0;
    const monthly = parseFloat(document.getElementById('monthlyInvestment').value) || 0;
    const years = parseInt(document.getElementById('investmentYears').value) || 0;
    const annualReturn = parseFloat(document.getElementById('investmentReturn').value) || 0;
    const result = document.getElementById('investmentResult');

    if(years <= 0) {
      result.textContent = "Enter years greater than 0.";
      return;
    }
    const months = years * 12;
    const monthlyReturn = annualReturn / 100 / 12;
    let futureValue = initial * Math.pow(1 + monthlyReturn, months);

    for(let i = 0; i < months; i++) {
      futureValue += monthly * Math.pow(1 + monthlyReturn, months - 1 - i);
    }

    result.textContent = `Future Value of Investment: $${futureValue.toFixed(2)}`;
  }

  // 17. Tax Estimator
  function estimateTax() {
    const income = parseFloat(document.getElementById('incomeTax').value) || 0;
    const status = document.getElementById('filingStatus').value;
    const result = document.getElementById('taxResult');

    if(income <= 0) {
      result.textContent = "Enter valid income.";
      return;
    }

    let tax = 0;

    // Simple US federal tax brackets 2023 for illustration
    const brackets = {
      single: [
        { rate: 0.10, cap: 11000 },
        { rate: 0.12, cap: 44725 },
        { rate: 0.22, cap: 95375 },
        { rate: 0.24, cap: 182100 },
        { rate: 0.32, cap: 231250 },
        { rate: 0.35, cap: 578125 },
        { rate: 0.37, cap: Infinity },
      ],
      married: [
        { rate: 0.10, cap: 22000 },
        { rate: 0.12, cap: 89450 },
        { rate: 0.22, cap: 190750 },
        { rate: 0.24, cap: 364200 },
        { rate: 0.32, cap: 462500 },
        { rate: 0.35, cap: 693750 },
        { rate: 0.37, cap: Infinity },
      ],
      head: [
        { rate: 0.10, cap: 15700 },
        { rate: 0.12, cap: 59850 },
        { rate: 0.22, cap: 95350 },
        { rate: 0.24, cap: 182100 },
        { rate: 0.32, cap: 231250 },
        { rate: 0.35, cap: 578100 },
        { rate: 0.37, cap: Infinity },
      ]
    };

    const bracketSet = brackets[status];

    let remaining = income;
    let lastCap = 0;

    for (let i = 0; i < bracketSet.length; i++) {
      const {rate, cap} = bracketSet[i];
      if (income > cap) {
        tax += (cap - lastCap) * rate;
        lastCap = cap;
      } else {
        tax += (remaining) * rate;
        break;
      }
      remaining = income - lastCap;
    }

    result.textContent = `Estimated Federal Tax: $${tax.toFixed(2)}`;
  }

  // 17. Expense Tracker
  function addExpense() {
    if (!currentUser) {
      alert("Please login to add expenses.");
      return;
    }
    const name = document.getElementById('expenseName').value.trim();
    const amount = parseFloat(document.getElementById('expenseAmount').value) || 0;
    if(!name || amount <= 0) {
      alert("Enter valid expense name and amount.");
      return;
    }
    userExpenses[currentUser].push({name, amount});
    updateExpenseList();
    document.getElementById('expenseName').value = '';
    document.getElementById('expenseAmount').value = '';
  }

  function updateExpenseList() {
    const list = document.getElementById('expenseList');
    const totalSpan = document.getElementById('totalExpenses');
    let total = 0;
    list.innerHTML = '';
    userExpenses[currentUser].forEach(exp => {
      total += exp.amount;
      const li = document.createElement('li');
      li.textContent = `${exp.name}: $${exp.amount.toFixed(2)}`;
      list.appendChild(li);
    });
    totalSpan.textContent = total.toFixed(2);
  }

  // Dark mode toggle
  darkModeToggle.addEventListener('change', () => {
    document.body.classList.toggle('dark-mode', darkModeToggle.checked);
  });

</script>

</body>
</html>
